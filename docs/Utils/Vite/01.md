# Vite

使用 vite 而不使用 webpack 的主要原因是速度更快（冷启动快、热更新快），使用简易
快的原因：开发环境按需加载，无需打包

Vite 借助了浏览器对 ESM 规范的支持，采取了与 Webpack 完全不同的 un-bundle 机制

快速冷启动
Vite 只启动一台静态页面的服务器，不会打包全部项目文件代码，服务器根据客户端的请求加载不同的模块处理，实现按需加载，
而 webpack 则是，一开始就将整个项目都打包一遍，再开启 dev-server，如果项目规模庞大，打包时间必然很长

打包编译速度
vite 使⽤的是 ES Module，所以代码中不可以使⽤ CommonJs 的 require, 只能用 ES6 的 import

热模块更新
当某个模块内容改变时，让浏览器去重新请求该模块即可，⽽不是像 webpack 重新将该模块的所有依赖重新编译

关于 un-bundle:
模块之间的依赖关系的解析由浏览器实现
文件的转换由 dev server 的 middleware 实现并做缓存
不对源文件做合并捆绑操作

缺点是：
dev 环境下启动 dev server 后， 第一次加载页面会比较慢 (但之后会比较快，因为完成转换的内容会被缓存)
dev 环境因为不生成 bundle，会导致大量的 http 请求
dev 环境使用 esbuild, 正式打包时使用 rollup，可能会出现一些功能在测试环境正常，但构建后异常的现象 (比如 vue-i18n 9 以上版本的@直接使用会报错，需要用{'@'}替代，但 esbuild 开发中有时不报错，rollup 打包后会遇到项目整个挂掉)
