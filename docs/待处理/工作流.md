## 之前的工作流：

为 master 分支和 dev 分支分别配置构建脚本，
要上正式就推 master，要上测试就推 dev

然后每个人的日常开发在自己的分支完成，需要上测试就合并到 dev，需要上正式就合并到 master，然后跑构建脚本或者让测试自己去操作构建

这样的缺点：

1. 所有人挤占一个测试环境，不同的人推代码到测试环境，会覆盖其他人的更新，目前这个问题无法解决。
2. 测试环境同时存在多个人待测试的代码，测试人员无法准确和线上正式环境比对，了解这次更新可能带来哪些改变，发现异常也通常会习以为常，或通过额外的交流去确定这是来自谁的代码修改，目前这个问题无法解决。
3. dev 分支根本不能保证和 main 分支的同步，平时会修改代码推测试环境给测试测，但这些代码可能有问题或不需要上正式，频繁更新的情况下，过不了几天 dev 分支就会累积一些可能会影响线上正式环境功能的代码，在这样的基础上，向 dev 分支继续推测试代码根本不能反映在线上的运行状况，并且如果不小心把 dev 分支合并进自己的分支或 main 分支，会把危险的代码悄悄上到正式。之前只能靠人工定期删除、重建 dev 分支，以及定期检查有没有来自 dev 分支的合并来解决，但无法预防事故的发生，只能事后做弥补，目前这个问题无法解决。
4. 当线上需要 hot fix 的时候，我们的手头还有工作待完成，这时候需要紧急上更新，之前的普遍做法是违背了约定的工作流程，而直接在 dev 分支或 main 分支上进行修改然后推送构建，这样会造成工作流的混乱，带来了很多意料之外的结果，目前这个问题无法解决，hot fix 全凭盲目操作，即使先推 dev 分支也不可测，因为多数情况下 dev 分支有待测试的代码，dev 分支和 main 分支并不同步，无法保证这次 hot fix 是否会带来其他意料之外的问题。目前这个问题无法解决。
5. 由于 dev 分支是一个和 main 分支不同步且完全不可控的危险分支，偶尔会发生开发时候有意无意把代码直接写在了 dev 分支，当修改比较多的时候需要迁移回自己的分支会非常难以实现，且无法预测，这个问题无法解决。

## 提议新的工作流：

删除 dev 分支，以后只要不是推 main 分支，其他任何分支的提交都会触发 ci/cd，得到一个个独立的测试环境
然后测试每次拿到这个独立的测试环境，就能针对这次提交进行测试，和线上正式做比对，得到 100%准确的测试结果

可以完全解决上面的五个问题
