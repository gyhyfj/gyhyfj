# 事件

https://developer.mozilla.org/zh-CN/docs/Web/Events
https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener#%E8%AF%AD%E6%B3%95
https://developer.mozilla.org/zh-CN/docs/Web/API/Event

每个事件都使用继承自`Event`接口的对象来表示

事件的触发方式有：

1. 用户触发，如鼠标或键盘事件
2. API 生成
3. 脚本代码触发，例如调用`HTMLElement.click()`方法
4. 定义一些自定义事件，再用`EventTarget.dispatchEvent()` 方法将自定义事件派发往指定的目标

## 事件捕获和冒泡

## 事件对象

## addEventListener 绑定事件

```ts
addEventListener<K extends keyof HTMLElementEventMap>(type: K, listener: (this: HTMLElement, ev: HTMLElementEventMap[K]) => any, options?: boolean | AddEventListenerOptions): void;

interface EventListenerOptions {
  capture?: boolean // 表示listener会在捕获阶段触发
}

interface AddEventListenerOptions extends EventListenerOptions {
  once?: boolean // 表示listener在添加之后最多只调用一次，如果为true，listener会在其被调用之后自动移除
  passive?: boolean // 表示listener永远不会调用preventDefault()，如果仍调用了，会被忽略且抛出控制台警告
  signal?: AbortSignal // 该AbortSignal的abort()方法被调用时，监听器会被移除
}

// 在旧版本的DOM的规定中，第三个参数是一个布尔值
// options 如果传入boolean，表示是否useCapture，为true时沿着DOM树向上冒泡的事件不会触发listener
```

通过`EventTarget.addEventListener()`方法可以将事件处理函数绑定到这些 EventTarget 上，也可以通过`removeEventListener()`方法去移除这些事件

EventTarget 可以是一个文档上的元素，Element、Document 和 Window，也可以是任何支持事件的对象

相比 onXYZ 属性绑定来说，它提供了一种更精细的手段来控制 listener 的触发阶段，（即可以选择捕获或者冒泡），且可以给同一个监听器注册多个处理器

## addEventListener 工作原理

工作原理是将实现 EventListener 的函数或对象添加到调用它的 EventTarget 上的指定事件类型的事件侦听器列表中。如果要绑定的函数或对象已经被添加到列表中，该函数或对象不会被再次添加

如果先前向事件侦听器列表中添加过一个匿名函数，并且在之后的代码中调用 addEventListener 来添加一个功能完全相同的匿名函数，那么之后的这个匿名函数也会被添加到列表中，即使使用完全相同的代码来定义一个匿名函数，这两个函数仍然存在区别

## addEventListener
