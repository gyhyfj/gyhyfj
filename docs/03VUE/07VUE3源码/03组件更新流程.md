# 组件更新流程

组件是由模板、组件描述对象和数据构成，数据的变化会影响组件的变化
组件渲染过程中创建了一个带副作用的渲染函数，当数据变化时候就会执行整个渲染函数来触发组件的更新

更新组件主要做三件事情，更新组件 vnode 节点 渲染新子树 vnode 根据新旧子树 vnode 执行 patch 逻辑

虽然 vue 更新粒度是组件级别，组件数据变化只会影响当前组件的更新
但组件更新过程中，也会对子组件做一定的检查，判断子组件是否也要更新，并通过某种机制避免子组件重复更新

如果是一个子节点数组更新到另一个子节点数组的情况，就要用到 diff 算法
通过更新、删除、移动、添加节点完成更新

先从头部开始同步
再从尾部同步
然后处理三种情况：
a.新子节点有剩余要添加的新节点
b.旧子节点有剩余要删除的多余节点
c.未知子序列 - 求解最长递增子序列 - 贪心 + 二分查找 O(nlogn)

对比新旧子序列，需要遍历某个序列
如果遍历旧的子序列过程中需要判断某个节点是否在新子序列中存在，就需要双重循环 O(n^2)
可以空间换时间，建立索引图，把时间复杂的降低到 O(n)

需要用到 key，key 相同的就是同一个节点，直接执行 patch 更新即可
