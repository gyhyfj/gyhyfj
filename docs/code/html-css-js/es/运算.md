# 运算

## `+ - * / %`

%是取余 `9 % 2 = 1` `2 % 9 = 2`

小数和整数相乘，可能会出现异常
浮点数值得最高精度是 17 位小数，但在进行算数运算时其精度远远不如整数，尽量避免小数进行算数运算。

```js
console.log(0.0023 * 100) // 0.22999999999999998
console.log(15 * 0.00001) // 0.00015000000000000001
console.log(15 / 10000) // 0.0015
```

## `++ --`

`p++`先返回后自增 `++p`先自增后返回

## `== != === !==`

`===`（全等） `!==`（不全等）

如果操作数的类型不同，`==` 运算符会在比较之前尝试将它们转换为相同的类型

```js
let a = 1
let b = '1'
let c = '1'
console.log(a == b) // true
console.log(a == c) // true 先临时类型转换后比较
console.log(a === b) // false
console.log(b === c) // true 两个相同字符串指向内存中同一片区域
console.log(a != b) // false 其实就是!(a==b)
console.log(a !== b) // true 其实就是!(a===b)

console.log(+0 === -0) // true

let m = new Object({
  x: 1,
  y: 1,
})
let n = new Object({
  x: 1,
  y: 1,
})
console.log(m === n) // false // m 和 n 指向内存中两片区域

let x = {
  x: 1,
  y: 1,
}
let y = x
console.log(x === y) // true
y.x = 2
console.log(x.x) // 2 // x 和 y 指向内存中同一片区域

console.log(undefined == false) // false
console.log(null == false) // false

console.log(!undefined) // true
console.log(!null) // true
console.log(!NaN) // true
console.log(!0) // true
console.log(!'') // true
```

## `&& || !`

`a && b && c` 找假，找到返回假的，找不到返回最后一个
`a || b || c` 找真，找到返回真的，找不到返回最后一个
JS 中的真假判断，不是一定要是布尔值 `== false`
**断路后，右边剩下的表达式不再执行**
**与运算优先级比或运算高, 但这种优先级只体现在结合性，计算时仍从左到右**

```js
function printA() {
  console.log('A')
}

function printB() {
  console.log('B')
}

console.log(NaN && printA() && printB()) // NaN
console.log(printA() && printB() && 9) // A undefined
console.log(true || (printA() && printB())) // true
console.log(false || (true && printB())) // B undefined
```

## `& | ^ ~ << >> >>>`

JavaScript 将数字存储为 64 位浮点数，但所有按位运算都以 32 位二进制数执行。
在执行位运算之前，JavaScript 将数字转换为 32 位有符号整数。
执行按位操作后，结果将转换回 64 位 JavaScript 数
只支持对 Number 类型进行位运算

```js
/* n ^ m ^ m = n */
a = 72
b = 3
a = a ^ b
b = a ^ b
a = a ^ b
console.log(`a = ${a}, b = ${b}`) // a = 3, b = 72

a = NaN
b = 3
a = a ^ b
b = a ^ b
a = a ^ b
console.log(`a = ${a}, b = ${b}`) // a = 3, b = 0
```

## `= += -= *= /= %=`

```js
let a = 2,
  b = 3
a /= b // a = a / b  0.66666
a %= b // a = a % b  2
```

## 运算优先级

1. 小括号 `()`
2. 单目运算符 `++ -- !`
3. 算数运算符（先乘除后加减）`+ - * /`
4. 关系运算符 `> >= < <=`
5. 相等运算符 `== === != !==`
6. 逻辑运算符（先与后或） `&& ||`
7. 赋值运算符 `=`
8. 逗号运算符 `,`
