# 数据类型

## 变量

变量是程序在内存中申请的一块用来存放数据的空间
变量名由大小写字母、数字、下划线和`$`组成，不能以数字开头,**变量名不能用`-`符**

```js
/* 只声明不赋值 */
let a
console.log(a) // undefined

/* 重复声明且重复赋值 */
let a = 2
let a = 3
console.log(a) // 3

/* 重复声明但不重复赋值 */
let a = 2
let a
console.log(a) // 2

/* 不声明直接赋值，不报错 */
a = 3
console.log(a) //3
```

## 6 种基本数据类型

## 1. Number（数字型）

JS 的 Number 类型不区分整型和浮点型
数字范围：Number.MIN_VALUE 到 Number.MAX_VALUE
三个特殊值：Infinity、 -Infinity、 NaN（非数值）

```js
console.log(Number.MAX_VALUE) // 1.7976931348623157e+308
console.log(Number.MIN_VALUE) // 5e-324

let a = Infinity
console.log(a) // Infinity

let a = -Infinity
console.log(a) // -Infinity

let a = 0 / 0
console.log(a) // NaN
console.log(isNaN(a)) // true
```

## 2. String（字符串型）

JS 的 String 不区分字符型和字符串型
用`'`或`"`或`` ` ``（支持多行字符）包裹

**JSON 解析字符串时，一定是内双外单**

```js
a = JSON.parse('["abc"]')
console.log(a) // ['abc']
```

## 3. Boolean（布尔型）

true 和 false

## 4. Null（void 型）

一些方法获取不到结果的返回值
可以给变量赋值为 null，来清空变量，可以用来释放堆内存

## 5. Undefined（void 型）

1. 变量只声明未赋值，值为 undefined
2. 对象的属性不存在，获取的值为 undefined
3. 函数的形参没传入实参，值为 undefined
4. 函数没有返回值，返回 undefined
5. 超出数组范围的引用，返回 undefined

```js
let a = 0
console.log(console.log(a)) // 0 undefined
```

## 6. Symbol

Symbol() 函数会返回 symbol 类型的值，该类型具有静态属性和静态方法。
每个从 Symbol() 返回的 symbol 值都是唯一的。一个 symbol 值能作为对象属性的标识符；这是该数据类型仅有的目的。
https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol

```js
let a = Symbol('1')
console.log(a) // Symbol(1)
console.log(a == '1') // false

Symbol('bar') === Symbol('bar') // false，Symbol() 函数每次都会返回新的一个 symbol
```

Symbol.for(key) 方法会根据给定的键 key，来从运行时的 symbol 注册表中找到对应的 symbol，如果找到了，则返回它，否则，新建一个与该键关联的 symbol，并放入全局 symbol 注册表中。

```js
/*
 * 第一个for方法：创建一个 symbol 并放入 symbol 注册表中，键为 "foo"
 * 第二个for方法：从 symbol 注册表中读取键为"foo"的 symbol
 */
Symbol.for('bar') === Symbol.for('bar') // true
```

## 引用数据类型/复杂数据类型

统称为 Object

## 1. Array（数组）

JS 数组可以混合存放任意类型的变量
可以用 new 方法创建，也可以用字面量创建

```js
let a = new Array() // []
let a = [] // []

let a = [1, 2]
a[3] = 6 // [ 1, 2, <1 empty item>, 6 ]
```

## 2. Object（对象）

在 JS 中，对象是一组无序的相关属性和方法的集合，所有的事物都是对象，例如字符串、数值、数组、函数等。对象是由属性和方法组成的。
可以用`new Object()`创建，也可以用字面量创建，也可以也可以自己写一个构造函数，用`new 构造函`数创建

```js
let obj = new Object()
obj.name = 'zs'
obj.age = 14

let obj = {
  name: 'zs',
  age: 14,
}

function Person(name, age) {
  this.name = name
  this.age = age
}
let obj = new Person() // { name: undefined, age: undefined }
let obj = new Person('zs', 14) // { name: 'zs', age: 14 }
```

### new 与构造函数

new 关键字会进行如下的操作：

1. 创建一个空的简单 JavaScript 对象（即{}）；
2. 为步骤 1 新创建的对象添加属性**proto**，将该属性链接至构造函数的原型对象 ；
3. 将步骤 1 新创建的对象作为 this 的上下文 ；
4. 如果该函数没有返回对象，则返回 this。

构造函数名称首字母通常大写，且内部构造的属性名与方法名之前要加`this.`，调用时要用关键词`new`
一般情况下，构造函数不返回值，但是用户可以选择主动返回对象，来覆盖正常的对象创建步骤

## 3. Function（函数）

函数实际上是一个函数对象，而函数名只是指向这个函数的变量

### arguments 对象

当我们不确定有多少个参数传递的时候，可以用 arguments 来获取。它是函数的内置对象，只在函数内部起作用，存储了传递的所有实参。
arguments 是伪数组，具有 length 长度，按照索方式存储数据，但不具有数组的 pop、push 等方法
可以使用`Array.from()`方法或扩展运算符`...`将参数转换为真实数组：

```js
function func(a, b) {
  console.log(arguments.length)
  console.log(arguments[0])
}
let args = Array.from(arguments)
let args = [...arguments]
```

**如果你编写兼容 ES6 的代码，那么优先推荐使用 剩余参数**

### 剩余参数

剩余参数语法允许我们将一个不定数量的参数表示为一个数组
如果函数的最后一个命名参数以...为前缀，则它将成为一个由剩余参数组成的真数组

```js
function foo(a, b, ...rest) {
  /*
   * 传入的参数先绑定a、b，多余的参数以数组形式交给变量rest
   * rest没接收到参数时，则为一个空数组[]
   */
}
```

arguments 对象不是一个真正的数组，
而剩余参数是真正的 Array 实例，也就是说你能够在它上面直接使用所有的数组方法，比如 sort，map，forEach 或 pop

## 4. Map（映射）

## 5. Set（集合）

## 6. Math（数学）

Math 对象 是一个内置对象，它拥有一些数学相关的属性和方法
Math 的所有属性与方法都是静态的
Math 不是一个函数对象，也不是一个构造器

```js
Math.PI //3.141592653589793

Math.round(3.14) // 3 四舍五入
Math.ceil(3.14) // 4 向上取整
Math.floor(3.14) // 3 向下取整

Math.max(1, 2, 3) // 3 最大值
Math.min(1, 2, 3) // 1 最小值

Math.abs(-1) // 1 绝对值

Math.random() // 生成[0,1)上随机的浮点数

/* 生成[min,max]上的随机整数 */
function getRandomIntInclusive(min, max) {
  min = Math.ceil(min)
  max = Math.floor(max)
  //含最大值，含最小值
  return Math.floor(Math.random() * (max - min + 1)) + min
}
```

// TODO 更多的随机函数

## 7. Date（日期）

`new Date()`是一个构造函数，必须使用 new 来调用创建我们的日期对象。

## 8. RegExp（正则表达式）

## 数据类型的区别

存储空间区别：基本数据类型存储在栈内存中，引用数据类型存储在堆内存中
存储值类型区别：数据存储时，基本数据类型在变量中存的是值，引用数据类型在变量中存储的是空间地址
操作区别：基本数据操作的是值，引用数据类型操作的是空间地址

## 数据类型检测

1. typeof xxx
   返回字符串

   ```js
   typeof undefined // undefined
   typeof null // object
   typeof ()=>{} // function
   ```

2. xxx instanceof constructor
   用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上
   难以判断一些基础数据类型
   返回 true 或 false

   ```js
   2 instanceof Number // false
   true instanceof Boolean // false
   'str' instanceof String // false
   [] instanceof Array // true
   (()=>{}) instanceof Function // true
   {} instanceof Object // true

   let str = 'str'
   str instanceof String // false

   let str = new String('str')
   str instanceof String // true
   ```

3. Object.prototype.toString.call(xxx)
   返回字符串`'[object 数据类型]'`

   ```js
   Object.prototype.toString.call(1) // [object Number]
   Object.prototype.toString.call(undefined) // [object Undefined]
   Object.prototype.toString.call(null) // [object Null]
   Object.prototype.toString.call(/abc/g) // [object RegExp]
   Object.prototype.toString.call(new Date()) // [object Date]
   ```

## 数据类型转换

1. 转为字符串类型
   变量.toString()
   String(变量)
   变量+''

2. 转为数字类型
   Number(变量)

   ```js
   parseInt(变量) // 将 String 类型变量转为整数（不四舍五入，直接去掉小数部分）
   parseFloat(变量) // 将 String 类型变量转为浮点数（保留小数部分）
   ```

3. 转为布尔类型
   Boolean(变量)

   ```js
   Boolean('true') // true
   Boolean('false') // true
   Boolean('0') // true
   Boolean('abc') // true
   Boolean('') // false
   Boolean(null) // false
   Boolean(undefined) // false
   Boolean(NaN) // false
   ```
